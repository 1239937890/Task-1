package jnshu.tasksix.service;import com.alibaba.fastjson.JSON;import jnshu.tasksix.dao.ProfessionMapper;import jnshu.tasksix.model.Profession;import jnshu.tasksix.util.MemcachedUtil;import jnshu.tasksix.util.RedisUtil;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.cache.annotation.Cacheable;import org.springframework.stereotype.Service;import java.util.Date;import java.util.List;/** * 可以查询所有职业信息 * 接口ProfessionService的实现 * * @author Administrator * @date 11/8/2017 */@Service("professionService")public class ProfessionServiceImpl implements ProfessionService {    private static Logger loggerProSerImpl= LoggerFactory.getLogger(ProfessionServiceImpl.class);    @Autowired    ProfessionMapper professionMapper;    @Autowired    RedisUtil redisUtil;    //查询全部职业信息    public List<Profession> listProfession() {        loggerProSerImpl.info("查询全部职业信息");        List<Profession> professions= null;        String deserialization = redisUtil.getValue("listProfession");        if(deserialization != null) {            //对象反序列化            professions = JSON.parseObject(deserialization,List.class);            loggerProSerImpl.info("从缓存获取 listStudentTable");            return professions;        }        else {            try {                professions = professionMapper.listProfession();                loggerProSerImpl.info("professions number : " + professions.size());            } catch (NullPointerException t) {                t.printStackTrace();            }        }        //对象序列化        String serialization = JSON.toJSONString(professions);        boolean success = redisUtil.setCacheValue("listStudentTable",serialization,1000*60*5);        loggerProSerImpl.info("是否成功存入缓存： "+ success);        return professions;    }}